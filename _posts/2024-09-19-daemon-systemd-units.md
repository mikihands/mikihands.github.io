---
layout: post
title:  "Linux Daemon과 Systemd 유닛"
date:   2024-09-19 22:15:00 +0900
categories: Linux
tags: Linux Daemon Systemd-units
---

### 리눅스 데몬과 systemd 유닛의 개념과 차이점

리눅스 시스템을 사용하다 보면 "데몬(Daemon)"과 "systemd 유닛(Unit)"이라는 용어를 자주 접하게 된다. 이 두 가지는 모두 리눅스 운영체제에서 중요한 역할을 하지만, 그 의미와 기능은 다르다. 이 글에서는 초보자가 쉽게 이해할 수 있도록 데몬과 systemd 유닛의 개념, 차이점, 그리고 종류에 대해 설명한다.



#### 1. 데몬(Daemon)이란?

데몬은 **백그라운드에서 실행되는 프로그램**이다. 사용자가 직접 실행하지 않아도 자동으로 시작되어 시스템의 특정 기능을 수행한다. 예를 들어, 웹 서버, 데이터베이스, 네트워크 관리 등 다양한 역할을 한다. 데몬은 사용자와 직접 상호작용하지 않고 시스템이 부팅될 때 실행되어 지속적으로 작동한다.

##### 데몬의 특징:

- **백그라운드에서 실행**: 데몬은 시스템이 켜져 있는 동안 계속해서 동작한다.
- **자동 시작**: 대부분의 데몬은 시스템이 부팅될 때 자동으로 시작된다.
- **이름 규칙**: 일반적으로 데몬의 이름은 "d"로 끝난다. 예를 들어, `sshd`는 SSH 서비스를 제공하는 데몬이고, `httpd`는 웹 서버를 위한 데몬이다.

#### 2. systemd 유닛(Unit)이란?

`systemd`는 현대 리눅스에서 시스템과 서비스를 관리하는 데 사용되는 **서비스 관리자**이다. `systemd`는 시스템의 부팅부터 서비스 시작, 종료 등 다양한 작업을 처리한다. 이를 효율적으로 관리하기 위해 **유닛(Unit)** 이라는 개념을 사용한다. 유닛은 시스템의 특정 요소를 관리하는 구성 단위이며, 그중에는 데몬뿐만 아니라 타이머, 마운트 포인트, 소켓 등도 포함된다.

##### 유닛의 종류:

- **서비스 유닛(.service)**: 데몬과 같은 백그라운드 서비스를 관리한다.
- **타이머 유닛(.timer)**: 특정 시간이나 주기에 맞춰 작업을 실행한다.
- **마운트 유닛(.mount)**: 파일 시스템의 마운트를 관리한다.
- **소켓 유닛(.socket)**: 네트워크 소켓을 관리하여 필요 시 서비스를 시작한다.
- **타겟 유닛(.target)**: 여러 유닛을 그룹화하여 시스템의 특정 상태를 정의한다.

#### 3. 데몬과 systemd 유닛의 차이점

- **데몬**은 단순히 백그라운드에서 실행되는 프로그램이다. 시스템 서비스의 일종으로 지속적으로 특정 작업을 처리한다.
- **systemd 유닛**은 시스템의 여러 요소(서비스, 타이머, 마운트 등)를 관리하는 구성 단위이다. 데몬은 `systemd` 유닛 중 하나일 뿐, 모든 유닛이 데몬인 것은 아니다.

`systemd`는 데몬을 포함한 다양한 유닛을 제어하며, 데몬은 시스템의 여러 기능을 백그라운드에서 처리하는 역할을 한다. `systemd`는 데몬뿐만 아니라 타이머나 마운트 포인트 등 시스템의 여러 중요한 요소를 관리하는 강력한 도구이다.

#### 4. 예시로 보는 데몬과 systemd 유닛

- **`sshd.service`**: SSH 데몬을 관리하는 서비스 유닛이다. 사용자가 원격으로 접속할 수 있도록 백그라운드에서 SSH 서비스를 제공한다.
- **`cron.service`**: `cron`이라는 데몬은 주기적인 작업을 예약하여 실행하는 프로그램이다. 이 역시 `systemd`에 의해 관리되는 서비스 유닛이다.
- **`tmp.mount`**: `/tmp` 디렉토리를 마운트하는 마운트 유닛이다. 이 유닛은 파일 시스템을 관리하며, 데몬은 아니지만 시스템에서 중요한 역할을 한다.


#### 5. 정리

- **데몬**은 백그라운드에서 실행되는 프로그램으로, 시스템 서비스의 한 형태이다.
- **systemd 유닛**은 시스템의 요소들을 관리하기 위한 구성 단위이며, 데몬을 포함하지만 데몬만을 의미하지는 않는다.
- **systemd**는 데몬뿐만 아니라 타이머, 마운트, 소켓 등 시스템의 다양한 기능을 관리하는 도구이다.

리눅스를 처음 접하는 사용자들은 데몬과 유닛을 혼동할 수 있지만, 데몬은 그저 백그라운드에서 실행되는 프로그램이고, `systemd` 유닛은 시스템의 여러 요소를 제어하는 구성 단위라고 이해하면 된다. `systemd`가 데몬을 포함한 다양한 시스템 요소를 관리함으로써 리눅스 시스템이 효율적으로 동작하게 된다.


---



### systemctl을 활용한 유용한 명령어들

리눅스에서 `systemctl`은 `systemd`를 기반으로 시스템 서비스(데몬)와 유닛을 관리하는 매우 중요한 명령어이다. 시스템의 상태를 체크하거나, 데몬을 재시작하거나, 로그를 확인하는 등의 작업을 할 때 자주 사용된다. 이 글에서는 `systemctl` 명령어를 활용하여 데몬이나 유닛을 관리하는 방법을 소개한다.



#### 1. 서비스 시작 및 중지

특정 서비스(데몬)를 시작하거나 중지할 때 `systemctl`을 사용한다. 이는 해당 서비스를 수동으로 제어하는 방법이다.

- **서비스 시작**:

  ```bash
  sudo systemctl start <서비스명>
  ```

  예를 들어, Apache 웹 서버를 시작하려면:

  ```bash
  sudo systemctl start httpd
  ```

- **서비스 중지**:

  ```bash
  sudo systemctl stop <서비스명>
  ```

  예를 들어, SSH 서비스를 중지하려면:

  ```bash
  sudo systemctl stop sshd
  ```

#### 2. 서비스 재시작

서비스를 재시작할 때 사용한다. 재시작 명령은 기존 서비스를 중지하고 다시 시작한다.

- 서비스 재시작:


  ```bash
  sudo systemctl restart <서비스명>
  ```

  예를 들어, MySQL 서비스를 재시작하려면:

  ```bash
  sudo systemctl restart mysqld
  ```

#### 3. 서비스 다시 로드

일부 서비스는 중지하거나 재시작할 필요 없이 설정 파일을 다시 로드할 수 있다. 서비스의 설정 파일을 수정한 후 서비스 자체는 중단하지 않고 설정만 반영하고 싶을 때 사용한다.

- 설정 다시 로드 :

  ```bash
  sudo systemctl reload <서비스명>
  ```

  예를 들어, Nginx 서버의 설정을 다시 로드하려면:

  ```bash
  sudo systemctl reload nginx
  ```

#### 4. 데몬 전체 다시 로드

`daemon-reload` 명령어는 systemd가 관리하는 모든 유닛의 설정을 다시 로드하게 한다. 새로운 유닛 파일을 추가하거나 수정했을 때 실행해야 한다.

- 데몬 다시 로드 :

  ```bash
  sudo systemctl daemon-reload
  ```

#### 5. 서비스 상태 확인

특정 서비스가 현재 어떻게 동작하고 있는지 확인할 때 `status` 명령어를 사용한다. 서비스가 실행 중인지, 오류가 발생했는지 등을 확인할 수 있다.

- 서비스 상태 확인 :

  ```bash
  sudo systemctl status <서비스명>
  ```

  예를 들어, Docker 서비스의 상태를 확인하려면:

  ```lua
  sudo systemctl status docker
  ```

#### 6. 서비스 로그 확인

서비스에서 발생한 로그를 확인하려면 `journalctl` 명령어와 함께 `systemctl`을 사용한다. 이는 특정 서비스에서 발생한 오류나 이벤트를 추적할 때 유용하다.

- 서비스 로그 확인 :

  ```bash
  sudo journalctl -u <서비스명>
  ```

  예를 들어, SSH 서비스의 로그를 확인하려면:

  ```bash
  sudo journalctl -u sshd
  ```

#### 7. 서비스 자동 시작 설정 및 해제

시스템이 부팅될 때 특정 서비스가 자동으로 시작되도록 설정하거나, 자동 시작을 해제할 수 있다.

- **자동 시작 설정**:

  ```bash
  sudo systemctl enable <서비스명>
  ```

  예를 들어, MySQL 서비스를 시스템 부팅 시 자동으로 시작되도록 설정하려면:

  ```bash
  sudo systemctl enable mysqld
  ```

- **자동 시작 해제**:

  ```bash
  sudo systemctl disable <서비스명>
  ```

  예를 들어, Nginx 서버의 자동 시작을 해제하려면:

  ```bash
  sudo systemctl disable nginx
  ```

#### 8. 활성화된 서비스 목록 확인

현재 활성화된 모든 서비스 목록을 확인할 때 사용한다.

- 활성화된 서비스 목록 확인 :

  ```bash
  sudo systemctl list-units --type=service --state=running
  ```

#### 9. 서비스 리스타트가 불가능할 때 (서비스 파일 누락 등)

간혹 서비스 파일이 수정되거나 새로 추가된 후 systemctl 명령어가 예상대로 작동하지 않을 때가 있다. 이럴 때는 서비스 파일을 다시 로드해야 한다.

- 서비스 파일 다시 로드 :

  ```bash
  sudo systemctl daemon-reload
  ```


### 정리

`systemctl` 명령어는 리눅스에서 데몬과 다양한 유닛을 관리하는 데 필수적인 도구이다. 이 명령어를 사용하여 서비스를 시작하거나 중지하고, 설정 파일을 다시 로드하고, 서비스 상태와 로그를 확인하는 등 다양한 작업을 수행할 수 있다. 초보자들도 위에 나열된 명령어들을 잘 익혀두면 시스템 관리에 많은 도움이 될 것이다.

